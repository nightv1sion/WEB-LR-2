<html>
    <head>
        <meta charset="utf-8">
        <link rel="stylesheet" type="text/css" href="../styles/style.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/additional-methods.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/additional-methods.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/jquery.maskedinput@1.4.1/src/jquery.maskedinput.min.js" type="text/javascript"></script>
    </head> 
    <body>
        <form autocomplete="off" id="form" name="form">
            <div class="registration-header">
                <h1>Регистрация</h1>
            </div>
            <div class="form-inputs">
                    <label for="email">Почта</label>
                    <div class="registration-input">
                        <input type="email" name="email" id="email" class="form-control"  required/>
                    </div>
                <div>
                    <label for="password">Пароль</label>
                    <div>
                        <input type="password" name="password" id="password" class="form-control"   required/>
                    </div>
                </div>
                <div>
                    <label for="login">Логин</label>
                    <div class="registration-input">
                        <input type="text" name="login" id="login"  class="form-control" required/>
                    </div>
                </div>
                <div>
                    <label for="birthday">Дата рождения</label>
                    <div class="registration-input">
                        <input type="date" name="birthday" id="birthday" class="form-control" required/>
                    </div>
                </div>
                <div>
                    <label for="image">Фото</label>
                    <div class="registration-input">
                        <input type="file" name="image" id="image" class="form-control"/>
                    </div>
                </div>
                <div>
                    <label for="tel">Номер телефона</label>
                    <div class="registration-input">
                        <input type="tel" name="tel" id="tel" class="form-control" required/>
                    </div>
                </div>
                <div>
                    <label for="name">Имя</label>
                    <div class="registration-input">
                        <input type="text" name="name" id="name" class="form-control"  required/>
                    </div>
                </div>
                <div>
                    <label for="surname">Фамилия</label>
                   <div class="registration-input">
                     <input type="text" name="surname" id="surname" class="form-control"  required/>
                   </div>
                </div>
                <div>
                    <label for="city">Город</label>
                   <div class="input autocomplete">
                     <input type="text" name="city" id="city" class="form-control"  required/>
                   </div>
                </div>
                <div>
                    <label for="personaldata">Согласие на обработку персональных данных</label>
                    <div class="check">
                        <input type="checkbox" name="personaldata" id="personaldata" />
                    </div>
                </div>
                <div>
                    <label for="newslettersubscription">Получать рассылку</label>
                    <div class="check">
                        <input type="checkbox" checked name="newslettersubscription" id="newslettersubscription"/>
                    </div>
                </div>
                
            </div>
        
            <div class="registration-button">
                <input type="submit" value="Зарегистрироваться" id="submitbutton"/>
            </div>
        
            
        </form>
        
    </body>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
    <script src="../scripts/autocomplete.js"></script>
    <script>
        $("#tel").mask("+7(999) 999-9999");
        
        $('#form').validate({
            errorClass: "invalid",
            validClass: "valid",
            rules: {
                email: {
                    required: true,
                    email: true
                },
                password: {
                    required: true,
                    minlength: 8
                },
                login: "required",
                birthday: "required",
                image: "required",
                tel: {
                    required: true
                },
                name: "required",
                surname: "required",
                city: "required"
            },
            messages: {
                email: {
                    required: "Email обязателен к заполнению",
                    email: "Email невалиден"
                },
                password: {
                    required: "Пароль обязателен к заполнению",
                    minlength: "Пароль должен состоять минимум из 8 символов"
                },
                login: {
                    required: "Логин обязателен к заполнению"
                },
                birthday: {
                    required: "Дата рождения обязательна к заполнению"
                },
                tel: {
                    required: "Телефон обязателен к заполнению"
                },
                name: {
                    required: "Имя обязательно к заполнению",
                },
                surname: {
                    required: "Фамилия обязательна к заполнению",
                },
                city: {
                    required: "Город обязателен к заполнению",
                },
            }
        })
        
        
        $("form").submit((event) => {
            if($("#form").valid()){
                if(!$("#personaldata").is(":checked")){
                alert("Поставьте галочку на соглашении обработки данных!");
                event.preventDefault();
                }
                else {
                    alert("Всё ок!");
                }
            }
            
        })

    </script>
    <script src="autocomplete.js"></script>
    <script>
        
        const cities = ["Москва", "Санкт-Петербург", "Волгоград"];

        autocomplete(document.getElementById("city"), cities);
    </script>

</html>